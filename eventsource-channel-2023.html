<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Solid Notifications: EventSourceChannel2023</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" media="all" rel="stylesheet" title="W3C-ED" />
<style>
body {
counter-reset:section;
counter-reset:sub-section;
}
em.rfc2119 { color: #900; }
code, samp { color: #c83500; }
pre code, pre samp { color: #000; }
dfn { font-weight:inherit; }
.do.fragment a { border-bottom:0; }
.do.fragment a:hover { background:none; border-bottom:0; }
section figure pre { margin:1em 0; display:block; }
cite .bibref { font-style: normal; }
.tabs nav ul li { margin:0; }
div.issue, div.note, div.warning {
clear: both;
margin: 1em 0;
padding: 1em 1.2em 0.5em;
position: relative;
}
div.issue h3, div.note h3,
div.issue h4, div.note h4,
div.issue h5, div.note h5 {
margin:0;
font-weight:normal;
font-style:normal;
}
div.issue h3 > span, div.note h3 > span,
div.issue h4 > span, div.note h4 > span,
div.issue h5 > span, div.note h5 > span {
text-transform: uppercase;
}
div.issue h3, div.issue h4, div.issue h5 {
color:#ae1e1e;
}
div.note h3, div.note h4, div.note h5 {
color:#178217;
}
figure .example-h {
margin-top:0;
text-align: left;
color:#827017;
}
figure .example-h > span {
text-transform: uppercase;
}

header address a[href] {
float: right;
margin: 1rem 0 0.2rem 0.4rem;
background: transparent none repeat scroll 0 0;
border: medium none;
text-decoration: none;
}
header address img[src*="logos/W3C"] {
background: #1a5e9a none repeat scroll 0 0;
border-color: #1a5e9a;
border-image: none;
border-radius: 0.4rem;
border-style: solid;
border-width: 0.65rem 0.7rem 0.6rem;
color: white;
display: block;
font-weight: bold;
}
main article > h1 {
font-size: 220%;
font-weight:bold;
}

article section:not([id=abstract]):not([id=sotd]):not([id=references]):not([id=appendix]):not([id=acknowledgements]):not([id=change-log]):not([id=exit-criteria]) {
counter-increment:section;
counter-reset:sub-section;
}
article section:not([id=abstract]):not([id=sotd]):not([id=references]):not([id=appendix]):not([id=acknowledgements]):not([id=change-log]) section:not([id$=references]):not([id=exit-criteria]) {
counter-increment:sub-section;
counter-reset:sub-sub-section;
}
article section:not([id=abstract]):not([id=sotd]):not([id=references]):not([id=appendix]):not([id=acknowledgements]):not([id=change-log]) section:not([id$=references]):not([id=exit-criteria]) section {
counter-increment:sub-sub-section;
counter-reset:sub-sub-sub-section;
}
article section:not([id=abstract]):not([id=sotd]):not([id=references]):not([id=appendix]):not([id=acknowledgements]):not([id=change-log]) section:not([id$=references]):not([id=exit-criteria]) section section {
counter-increment:sub-sub-sub-section;
counter-reset:sub-sub-sub-sub-section;
}
article section:not([id=abstract]):not([id=sotd]):not([id=references]):not([id=appendix]):not([id=acknowledgements]):not([id=change-log]):not([id=exit-criteria]):not([id^=table-of-]) > h2:before {
content:counter(section) ".\00a0";
}
section:not([id$=references]):not([id^=change-log]):not([id=exit-criteria]) > h3:before {
content:counter(section) "." counter(sub-section) "\00a0";
}
section > h4:before {
content:counter(section)"." counter(sub-section) "." counter(sub-sub-section) "\00a0";
}
#acknowledgements ul { padding: 0; margin:0 }
#acknowledgements li { display:inline; }
#acknowledgements li:after { content: ", "; }
#acknowledgements li:last-child:after { content: ""; }

aside.do { overflow:inherit; }
aside.do blockquote {
padding: 0; border: 0; margin: 0;
}
dl[id^="document-"] ul {
padding-left:0;
list-style-type:none;
}
dl [rel~="odrl:action"],
dl [rel~="odrl:action"] li {
display: inline;
}
dl [rel~="odrl:action"] li:after {
content: ",";
}
dl [rel~="odrl:action"] li:last-child:after {
content: "";
}
</style>
    <link href="https://dokie.li/media/css/dokieli.css" media="all" rel="stylesheet" />
    <script src="https://dokie.li/scripts/dokieli.js" async=""></script>
  </head>

  <body about="" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/ skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# mem: http://mementoweb.org/ns# qb: http://purl.org/linked-data/cube# schema: http://schema.org/ doap: http://usefulinc.com/ns/doap# deo: http://purl.org/spar/deo/ fabio: http://purl.org/spar/fabio/ cito: http://purl.org/spar/cito/ as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp# earl: http://www.w3.org/ns/earl# spec: http://www.w3.org/ns/spec# rel: https://www.w3.org/ns/iana/link-relations/relation# odrl: http://www.w3.org/ns/odrl/2/" typeof="schema:CreativeWork prov:Entity as:Article">
    <header>
      <address>
        <a class="logo" href="https://solidproject.org/"><img height="66" width="72" alt="Solid Project" src="https://solidproject.org/TR/solid.svg"/></a>
      </address>
    </header>

    <main>
      <article about="" typeof="schema:Article doap:Specification">
        <h1 property="schema:name">EventSourceChannel2023</h1>
        <h2>Editor’s Draft, 2023-01-11</h2>

        <details open="">
          <summary>More details about this document</summary>

          <dl id="document-identifier">
            <dt>This version</dt>
            <dd><a href="https://solid.github.io/notifications/eventsource-channel-2023" rel="owl:sameAs">https://solid.github.io/notifications/eventsource-channel-2023</a></dd>
          </dl>

          <dl id="document-latest-version">
            <dt>Latest version</dt>
            <dd><a href="https://solid.github.io/notifications/eventsource-channel-2023" rel="rel:latest-version">https://solid.github.io/notifications/eventsource-channel-2023</a></dd>
          </dl>

          <div id="authors">
            <dl id="author-name">
              <dt>Editors</dt>
              <dd id="Aaron-Coburn"><span about="" rel="schema:editor schema:author"><span about="https://people.apache.org/~acoburn/#i" typeof="schema:Person"><a rel="schema:url" href="https://people.apache.org/~acoburn/"><span about="https://people.apache.org/~acoburn/#i" property="schema:name"><span property="schema:givenName">Aaron</span> <span property="schema:familyName">Coburn</span></span></a></span></span></dd>
            </dl>
          </div>

          <dl id="document-created">
            <dt>Created</dt>
            <dd><time content="2023-01-11T00:00:00Z" datatype="xsd:dateTime" datetime="2023-01-11T00:00:00Z" property="schema:dateCreated">2023-01-11</time></dd>
          </dl>

          <dl id="document-published">
            <dt>Published</dt>
            <dd><time content="2023-01-11T00:00:00Z" datatype="xsd:dateTime" datetime="2023-01-11T00:00:00Z" property="schema:datePublished">2023-01-11</time></dd>
          </dl>

          <dl id="document-modified">
            <dt>Modified</dt>
            <dd><time content="2023-01-11T00:00:00Z" datatype="xsd:dateTime" datetime="2023-01-11T00:00:00Z" property="schema:dateModified">2023-01-11</time></dd>
          </dl>

          <dl id="document-repository">
            <dt>Repository</dt>
            <dd><a href="https://github.com/solid/notifications" rel="doap:repository">GitHub</a></dd>
            <dd><a href="https://github.com/solid/notifications/issues" rel="doap:bug-database">Issues</a></dd>
          </dl>

          <dl id="document-language">
            <dt>Language</dt>
            <dd><span content="en" lang="" property="dcterms:language" xml:lang="">English</span></dd>
          </dl>

          <dl id="document-license">
            <dt>License</dt>
            <dd><a href="http://purl.org/NET/rdflicense/MIT1.0" rel="schema:license">MIT License</a></dd>
          </dl>

          <dl id="document-status">
            <dt>Document Status</dt>
            <dd prefix="pso: http://purl.org/spar/pso/" rel="pso:holdsStatusInTime" resource="#d2a849bc-3259-11ec-8cee-4ff1341c9be5"><span rel="pso:withStatus" resource="http://purl.org/spar/pso/draft" typeof="pso:PublicationStatus">Editor’s Draft</span></dd>
          </dl>

          <dl id="document-in-reply-to">
            <dt>In Reply To</dt>
            <dd><a href="https://solidproject.org/origin" rel="as:inReplyTo">Solid Origin</a></dd>
            <dd><a href="https://solid.github.io/notifications/protocol" rel="as:inReplyTo">Solid Notifications Protocol</a></dd>
            <dd><a href="https://github.com/solid/process/blob/main/notifications-panel-charter.md" rel="as:inReplyTo">Notifications Panel Charter</a></dd>
          </dl>

          <dl id="document-policy">
            <dt>Policy</dt>
            <dd>
              <dl id="document-policy-offer" rel="odrl:hasPolicy" resource="#document-policy-offer" typeof="odrl:Policy">
                <dt>Rule</dt>
                <dd><a about="#document-policy-offer" href="https://www.w3.org/TR/odrl-vocab/#term-Offer" typeof="odrl:Offer">Offer</a></dd>
                <dt>Unique Identifier</dt>
                <dd><a href="https://solid.github.io/notifications/eventsource-channel-2023#document-policy-offer" rel="odrl:uid">https://solid.github.io/notifications/eventsource-channel-2023#document-policy-offer</a></dd>
                <dt>Target</dt>
                <dd><a href="https://solid.github.io/notifications/eventsource-channel-2023" rel="odrl:target">https://solid.github.io/notifications/eventsource-channel-2023</a></dd>
                <dt>Permission</dt>
                <dd>
                  <dl id="document-permission" rel="odrl:permission" resource="#document-permission" typeof="odrl:Permission">
                    <dt>Assigner</dt>
                    <dd><a rel="odrl:assigner" href="https://www.w3.org/community/solid/">W3C Solid Community Group</a></dd>
                    <dt>Action</dt>
                    <dd>
                      <ul rel="odrl:action">
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-aggregate" resource="odrl:aggregate">Aggregate</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-archive" resource="odrl:archive">Archive</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-concurrentUse" resource="odrl:concurrentUse">Concurrent Use</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-DerivativeWorks" resource="http://creativecommons.org/ns#DerivativeWorks">Derivative Works</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-derive" resource="odrl:derive">Derive</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-digitize" resource="odrl:digitize">Digitize</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-display" resource="odrl:display">Display</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-Distribution" resource="http://creativecommons.org/ns#Distribution">Distribution</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-index" resource="odrl:index">Index</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-inform" resource="odrl:inform">Inform</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-install" resource="odrl:install">Install</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-Notice" resource="http://creativecommons.org/ns#Notice">Notice</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-present" resource="odrl:present">Present</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-print" resource="odrl:print">Print</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-read" resource="odrl:read">Read</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-reproduce" resource="odrl:reproduce">Reproduce</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-Reproduction" resource="http://creativecommons.org/ns#Reproduction">Reproduction</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-stream" resource="odrl:stream">Stream</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-synchronize" resource="odrl:synchronize">Synchronize</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-textToSpeech" resource="odrl:textToSpeech">Text-to-speech</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-transform" resource="odrl:transform">Transform</a></li>
                        <li><a href="https://www.w3.org/TR/odrl-vocab/#term-translate" resource="odrl:translate">Translate</a></li>
                      </ul>
                    </dd>
                  </dl>
                </dd>
              </dl>
            </dd>
          </dl>
        </details>

        <p class="copyright">Copyright © 2023 <a href="http://www.w3.org/community/solid/">W3C Solid Community Group</a>.</p>

        <div datatype="rdf:HTML" id="content" property="schema:description">
          <section id="abstract">
            <h2>Abstract</h2>
            <div datatype="rdf:HTML" property="schema:abstract">
              <p>The <cite><a href="https://solid.github.io/notifications/protocol">Solid Notifications Protocol</a></cite> defines a set of interaction patterns for agents to establish subscriptions to resources.</p>
              <p>This specification defines a channel type that applies these patterns to the <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html">EventSource</a> Web API.</p>
            </div>
          </section>

          <section id="sotd" inlist="" rel="schema:hasPart" resource="#sotd">
            <h2 property="schema:name">Status of This Document</h2>
            <div property="schema:description" datatype="rdf:HTML">
              <p>This section describes the status of this document at the time of its publication.</p>

              <p>This document was published by the <a href="https://www.w3.org/community/solid/">Solid Community Group</a> as an Editor’s Draft. The sections that have been incorporated have been reviewed following the <a href="https://github.com/solid/process">Solid process</a>. However, the information in this document is still subject to change. You are invited to <a href="https://github.com/solid/notifications/issues">contribute</a> any feedback, comments, or questions you might have.</p>

              <p>Publication as an Editor’s Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p>

              <p>This document was produced by a group operating under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p>
            </div>
          </section>

          <nav id="toc">
            <h2 id="table-of-contents">Table of Contents</h2>
            <div>
              <ol class="toc">
                <li class="tocline">
                  <a class="tocxref" href="#abstract">Abstract</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#sotd">Status of This Document</a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
                  <ol>
                    <li><a href="#terminology"><span class="secno">1.1</span> <span class="content">Terminology</span></a></li>
                    <li><a href="#overview"><span class="secno">1.2</span> <span class="content">Overview</span></a></li>
                    <li><a href="#conformance"><span class="secno">1.3</span> <span class="content">Conformance</span></a></li>
                  </ol>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#channel-type"><span class="secno">2</span> <span class="content">EventSourceChannel2023 Type</span></a>
                  <ol>
                    <li class="tocline">
                      <a class="tocxref" href="#eventsource-subscription"><span class="secno">2.1</span> Subscription Example</a>
                    </li>
                  </ol>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#authentication-authorization"><span class="secno">3</span> <span class="content">Authentication and Authorization</span></a>
                </li>
                <li class="tocline">
                  <a class="tocxref" href="#references"><span class="secno"></span> <span class="content">References</span></a>
                  <ol>
                    <li><a href="#normative-references"><span class="secno"></span> <span class="content">Normative References</span></a></li>
                  </ol>
                </li>
              </ol>
            </div>
          </nav>

          <section id="introduction" inlist="" rel="schema:hasPart" resource="#introduction">
            <h2 about="#introduction" property="schema:name" typeof="deo:Introduction">Introduction</h2>
            <div datatype="rdf:HTML" property="schema:description">
              <p><em>This section is non-normative.</em></p>

              <p id="motivation" rel="schema:hasPart" resource="#motivation" typeof="deo:Motivation"><span datatype="rdf:HTML" property="schema:description">The <cite><a href="https://solid.github.io/notifications/protocol">Solid Notifications Protocol</a></cite> describes a general pattern by which agents can be notified when a Solid Resource changes. In the context of a Web Browser, the EventSource API provides a convenient mechanism for a Solid Storage to alert a subscribing client of these changes.</span></p>

              <p>This document describes a Solid Notifications channel type that makes use of the EventSource Web API.</p>

              <p>This specification is for:</p>

              <ul rel="schema:audience">
                <li><a href="http://data.europa.eu/esco/occupation/a7c1d23d-aeca-4bee-9a08-5993ed98b135">Resource server developers</a> who wish to enable clients to listen for updates to particular resources.</li>
                <li><a href="http://data.europa.eu/esco/occupation/c40a2919-48a9-40ea-b506-1f34f693496d">Application developers</a> who wish to implement a client to listen for updates to particular resources.</li>
              </ul>

              <section id="terminology" inlist="" rel="schema:hasPart" resource="#terminology" typeof="skos:ConceptScheme">
                <h3 property="schema:name skos:prefLabel">Terminology</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <p><em>This section is non-normative.</em></p>

                  <p>This document uses terminology from the <cite><a href="https://solid.github.io/notifications/protocol">Solid Notification Protocol</a></cite>, including <q cite="https://solid.github.io/notifications/protocol#subscription">subscription request</q>, <q cite="https://solid.github.io/notifications/protocol#discovery">discovery</q>. This document also uses terms from <cite><a href="https://datatracker.ietf.org/doc/html/rfc6749">The OAuth 2.0 Authorization Framework</a></cite> specification, including <q>resource server</q>, <q>access token</q>, and <q>client</q>.</p>
                </div>
              </section>

              <section id="overview" inlist="" rel="schema:hasPart" resource="#overview">
                <h3 property="schema:name">Overview</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <p><em>This section is non-normative.</em></p>

                  <p>The following diagram shows the high-level interactions involved in this flow. How a client retrieves an access token for step 5 is outside the scope of this document.</p>

                  <figure id="solid-eventsource-flow" rel="schema:hasPart" resource="#solid-eventsource-flow">
                    <img src="eventsource-channel-2023-flow.mmd.svg" rel="schema:image" width="800" />

                    <figcaption property="schema:name">Solid EventSourceChannel2023 Flow</figcaption>
                  </figure>
                </div>
              </section>

              <section id="conformance" inlist="" rel="schema:hasPart" resource="#conformance">
                <h3 property="schema:name">Conformance</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <p>All assertions, diagrams, examples, and notes are non-normative, as are all sections explicitly marked non-normative. Everything else is normative.</p>

                  <p>The key words “MUST” and “MUST NOT” are to be interpreted as described in <cite><a href="https://tools.ietf.org/html/bcp14" rel="rdfs:seeAlso">BCP 14</a></cite> [<cite><a class="bibref" href="#bib-rfc2119">RFC2119</a></cite>] [<cite><a class="bibref" href="#bib-rfc8174">RFC8174</a></cite>] when, and only when, they appear in all capitals, as shown here.</p>
                </div>
              </section>
            </div>
          </section>

          <section id="channel-type" inlist="" rel="schema:hasPart" resource="#channel-type">
            <h2 property="schema:name">EventSourceChannel2023 Type</h2>
            <div datatype="rdf:HTML" property="schema:description">
              <p>This specification defines the <code>EventSourceChannel2023</code> type for use with Solid Notifications Protocol's subscriptions that use the EventSource Web API. The URI of the channel type is <code>http://www.w3.org/ns/solid/notification#EventSourceChannel2023</code>.</p>
              <p>An <code>EventSourceChannel2023</code> API MUST conform to the <cite><a href="https://solid.github.io/notifications/protocol#discovery">Solid Notifications Protocol</a></cite>. [<cite><a class="bibref" href="#bib-solid-notifications">SOLID-NOTIFICATIONS</a></cite>]</p>


              <p>A client establishes a subscription using the <code>EventSourceChannel2023</code> type by sending an authenticated subscription request to the subscription resource based on <cite><a href="https://solid.github.io/notifications/protocol#discovery">Solid Notifications Protocol discovery</a></cite>.</p>

              <p>For <code>EventSourceChannel2023</code> interactions, the client sends a JSON-LD payload to the appropriate subscription resource via <code>POST</code>. The only required fields in this interaction are <code>type</code> and <code>topic</code>. <span about="" id="client-subcription-type" rel="spec:requirement" resource="#client-subscription-type"><span property="spec:statement">The <code>type</code> field <span rel="spec:requirementLevel" resource="spec:MUST">MUST</span> contain the <code>EventSourceChannel2023</code> type.</span></span> <span about="" id="client-subscription-feature" rel="spec:requirement" resource="#client-subscription-feature"><span property="spec:statement">The <code>topic</code> field <span rel="spec:requirementLevel" resource="spec:MUST">MUST</span> contain the URL of the resource a client wishes to subscribe to changes.</span></span></p>

              <section id="eventsource-subscription" inlist="" rel="schema:hasPart" resource="#eventsource-subscription">
                <h3 property="schema:name">Subscription Example</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <p><em>This section is non-normative.</em></p>

                  <p>An example <code>POST</code> request using a <code>DPoP</code> bound access token is below:</p>

                  <figure id="notification-subscription-request" class="example listing" rel="schema:hasPart" resource="#notification-subscription-request">
                    <p class="example-h"><span>Example</span>: Requesting an EventSource subscription URL from the subscription resource.</p>

                    <pre about="#notification-subscription-request" property="schema:description" typeof="fabio:Script"><code>POST /subscription</code>
<code>Authorization: DPoP &lt;token&gt;</code>
<code>DPoP: &lt;proof&gt;</code>
<code>Content-Type: application/ld+json</code>
<code></code>
<code>{</code>
<code>  "@context": ["https://www.w3.org/ns/solid/notification/v1"],</code>
<code>  "type": "EventSourceChannel2023",</code>
<code>  "topic": "https://storage.example/resource",</code>
<code>  "state": "opaque-state",</code>
<code>  "endAt": "2023-01-11T12:37:15Z",</code>
<code>  "rate": "PT10s"</code>
<code>}</code></pre>

                    <figcaption property="schema:name"><code>POST</code> request including <code>type</code> and <code>topic</code> targeting the subscription resource.</figcaption>
                  </figure>

                  <p>A successful response will contain a URL to the subscription API (<code>receiveFrom</code>) that can be used directly with a JavaScript client.</p>

                  <figure id="notification-subscription-response" class="example listing" rel="schema:hasPart" resource="#notification-subscription-response">
                    <p class="example-h"><span>Example</span>: Response from the Notification Subscription including the EventSource subscription URL.</p>

                    <pre about="#notification-subscription-response" property="schema:description" typeof="fabio:Script"><code>HTTP/2</code>
<code>Content-Type: application/ld+json</code>
<code></code>
<code>{</code>
<code>  "@context": "https://www.w3.org/ns/solid/notification/v1",</code>
<code>  "type": "EventSourceChannel2023",</code>
<code>  "topic": "https://storage.example/data/resource",</code>
<code>  "receiveFrom": "https://eventsource.example/?auth=Ys3KiUq"</code>
<code>}</code></pre>

                    <figcaption property="schema:name">Response to the <code>POST</code> request including <code>type</code> and <code>receiveFrom</code>.</figcaption>
                  </figure>

                  <p>In JavaScript, a client can use the data in the response to establish a connection to the EventSource hypermedia API.</p>

                  <figure id="eventsource-new" class="example listing" rel="schema:hasPart" resource="#eventsource-new">
                    <p class="example-h"><span>Example</span>: Establishing a new EventSource connection.</p>

                    <pre about="#eventsource-new" property="schema:description" typeof="fabio:Script"><code>const es = new EventSource("https://eventsource.example/?auth=Ys3KiUq");</code></pre>

                    <figcaption property="schema:name">JavaScript code to establish a <code>new EventSource</code> connection</figcaption>
                  </figure>

                  <p>A client will define how to handle events, especially the <code>onerror</code> and <code>onmessage</code> events.</p>

                  <figure id="eventsource-onclose-onmessage" class="example listing" rel="schema:hasPart" resource="#eventsource-onclose-onmessage">
                    <p class="example-h"><span>Example</span>: Handling EventSource events after the connection is established.</p>

                    <pre about="#eventsource-onclose-onmessage" property="schema:description" typeof="fabio:Script"><code>es.onerror(evt => reconnect(evt));</code>
<code>es.onmessage(evt => console.log("Message received: ", evt))</code></pre>

                    <figcaption property="schema:name">JavaScript code to handle <code>onerror</code> and <code>onmessage</code> events</figcaption>
                  </figure>
                </div>
              </section>
            </div>
          </section>

          <section id="authentication-authorization" inlist="" rel="schema:hasPart" resource="#authentication-authorization">
            <h2 property="schema:name">Authentication and Authorization</h2>
            <div datatype="rdf:HTML" property="schema:description">
              <p>As described by the Solid Notifications Protocol section on <cite><a href="https://solid.github.io/notifications/protocol#authentication-authorization" rel="cito:discusses">Authorization</a></cite>, the EventSource subscription request requires authorization and follows the guidance of the Solid Protocol sections on <cite><a href="https://solidproject.org/TR/protocol#authentication" rel="cito:discusses">Authentication</a></cite> and <cite><a href="https://solidproject.org/TR/protocol#authorization" rel="cito:discusses">Authorization</a></cite> [<cite><a class="bibref" href="#bib-solid-protocol">SOLID-PROTOCOL</a></cite>].</p>

            </div>
          </section>

          <section class="appendix" id="references" inlist="" rel="schema:hasPart" resource="#references">
            <h2 property="schema:name">References</h2>
            <div datatype="rdf:HTML" property="schema:description">
              <section id="normative-references" inlist="" rel="schema:hasPart" resource="#normative-references">
                <h3 property="schema:name">Normative References</h3>
                <div datatype="rdf:HTML" property="schema:description">
                  <dl class="bibliography" resource="">
                    <dt id="bib-rfc2119">[RFC2119]</dt>
                    <dd><a href="https://datatracker.ietf.org/doc/html/rfc2119" rel="cito:citesAsAuthority"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a></dd>
                    <dt id="bib-rfc8174">[RFC8274]</dt>
                    <dd><a href="https://datatracker.ietf.org/doc/html/rfc8174" rel="cito:citesAsAuthority"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc8174">https://datatracker.ietf.org/doc/html/rfc8174</a></dd>
                    <dt id="bib-solid-notifications">[SOLID-NOTIFICATIONS]</dt>
                    <dd><a href="https://solidproject.org/TR/notifications-protocol" rel="cito:citesAsAuthority"><cite>Solid Notifications Protocol</cite></a>. Sarven Capadisli. W3C Solid Community Group.  Version 0.2.0. URL: <a href="https://solidproject.org/TR/notifications-protocol">https://solidproject.org/TR/notifications-protocol</a></dd>
                    <dt id="bib-solid-oidc">[SOLID-OIDC]</dt>
                    <dd><a href="https://solidproject.org/TR/oidc" rel="cito:citesAsAuthority"><cite>SOLID-OIDC</cite></a>. Aaron Coburn; elf Pavlik; Dmitri Zagidulin.  W3C Solid Community Group. Version 0.1.0.  URL: <a href="https://solidproject.org/TR/oidc">https://solidproject.org/TR/oidc</a></dd>
                    <dt id="bib-solid-protocol">[SOLID-PROTOCOL]</dt>
                    <dd><a href="https://solidproject.org/TR/protocol" rel="cito:citesAsAuthority"><cite>Solid Protocol</cite></a>. Sarven Capadisli; Tim Berners-Lee; Ruben Verborgh; Kjetil Kjernsmo.  W3C Solid Community Group. Version 0.10.0.  URL: <a href="https://solidproject.org/TR/protocol">https://solidproject.org/TR/protocol</a></dd>
                  </dl>
                </div>
              </section>
            </div>
          </section>
        </div>
      </article>
    </main>

    <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to top">↑</abbr></a></p>

    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  </body>
</html>
